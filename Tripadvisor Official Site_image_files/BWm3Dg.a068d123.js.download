(this.$WP=this.$WP||[]).push(["BWm3Dg",(e,t)=>{"use strict";var n,r,i,u,o,a,s,l,c,d,f,m,p,b,g,y,v,_;function D(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function h(e){D(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(new Error).stack,new Date(NaN))}function P(e){D(1,arguments);var t=h(e);return!isNaN(t)}function A(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var C=36e5,N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},I=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,T=/^([+-])(\d{2})(?::?(\d{2}))?$/;function E(e,t){D(1,arguments);var n=t||{},r=null==n.additionalDigits?2:A(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,u=w(e);if(u.date){var o=k(u.date,r);i=O(o.restDateString,o.year)}if(isNaN(i)||!i)return new Date(NaN);var a,s=i.getTime(),l=0;if(u.time&&(l=M(u.time),isNaN(l)||null===l))return new Date(NaN);if(!u.timezone){var c=new Date(s+l),d=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds());return d.setFullYear(c.getUTCFullYear()),d}return a=x(u.timezone),isNaN(a)?new Date(NaN):new Date(s+l+a)}function w(e){var t,n={},r=e.split(N.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],N.timeZoneDelimiter.test(n.date)&&(n.date=e.split(N.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=N.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function k(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),u=r[2]&&parseInt(r[2]);return{year:null==u?i:100*u,restDateString:e.slice((r[1]||r[2]).length)}}function O(e,t){if(null===t)return null;var n=e.match(I);if(!n)return null;var r=!!n[4],i=R(n[1]),u=R(n[2])-1,o=R(n[3]),a=R(n[4]),s=R(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,s)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}(t,a,s):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(L[t]||(q(e)?29:28))}(t,u,o)&&function(e,t){return t>=1&&t<=(q(e)?366:365)}(t,i)?(l.setUTCFullYear(t,u,Math.max(i,o)),l):new Date(NaN)}function R(e){return e?parseInt(e):1}function M(e){var t=e.match(S);if(!t)return null;var n=U(t[1]),r=U(t[2]),i=U(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i)?n*C+6e4*r+1e3*i:NaN}function U(e){return e&&parseFloat(e.replace(",","."))||0}function x(e){if("Z"===e)return 0;var t=e.match(T);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(r*C+6e4*i):NaN}var L=[31,null,31,30,31,30,31,31,30,31,30,31];function q(e){return e%400==0||e%4==0&&e%100}var F={__key:0xde7f19799ff7,id:"de7f19799ff7c888a9701debca005c6a",loc:{},definitions:[]},Y=e=>{if(!e||!e.dueDate)return null;var t="number"==typeof e.totalAmount&&e.totalAmount>=0?e.totalAmount:null,{currencyCode:n}=e,r=e.dueDate?E(e.dueDate):null;return n&&t&&r&&P(r)?{totalAmount:t,currencyCode:n,dueDate:r}:null},B=e=>{if(!e)return null;var{totalAmount:t,currencyCode:n,discountAmount:r}=e,{discountAmount:i=0}=r||{discountAmount:0};return t&&n?{totalAmount:t,currencyCode:n,discountAmount:i,amountPaid:t-i}:null},j=e=>{if(!e)return{startDate:null,endDate:null,renewalDate:null,cancellationDate:null,autoRenew:!1,withinFullRefundCancellationPeriod:!1};var t=E(e.startDate),n=E(e.endDate),r=e.renewalDate?E(e.renewalDate):null,i=e.cancellationDate?E(e.cancellationDate):null;return{startDate:P(t)?t:null,endDate:P(n)?n:null,renewalDate:r&&P(r)?r:null,cancellationDate:i&&P(i)?i:null,autoRenew:e.autoRenew,withinFullRefundCancellationPeriod:e.withinFullRefundCancellationPeriod}},z=e=>{var t=null==e?void 0:e.OptimusBenefits_getOptimusSubscriptionStatus;return t?{isMember:t.isMember,isFormerMember:!t.isMember&&!!t.subscriptionNumber,subscriptionNumber:t.subscriptionNumber,billingAccountId:t.billingAccountId,nextCharge:Y(t.nextCharge),subscriptionPrice:B(t.subscriptionPrice),...j(t.subscriptionDates),purchaseType:t.purchaseType,trialDetails:t.trialDetails,hasAcceptedVfTerms:t.hasAcceptedVfTerms||!1}:null},$=e=>{var{userId:t}=n.useContext(a);return d({query:F,pause:"undefined"==typeof window||!t||e},z)},H={__key:0xcd51845f3938,id:"cd51845f39387936c3094cf28e0bfaa4",loc:{},definitions:[]},V=(e,t,n,o)=>{var s,{userId:l}=r(a),[c,d]=i(l),[{data:f,fetching:p,error:b},g]=m({query:H,variables:{request:{currencyCode:e,discountCode:t,source:o}},pause:n});u((()=>{l!==c&&!n&&(g({requestPolicy:"network-only"}),d(l))}),[c,n,g,l]);var y=(e=>{var t,n;if(null==e||null==(t=e.fullSubscription)||!t.firstCharge)return null;var{firstCharge:r}=e.fullSubscription,i=e.discount&&!e.discount.trialDiscount?null==(n=e.discount)?void 0:n.originalPrice:(null==r?void 0:r.totalAmount)||0;return{firstCharge:{currencyCode:(null==r?void 0:r.currencyCode)||"USD",dueDate:new Date((null==r?void 0:r.dueDate)||""),totalAmount:(null==r?void 0:r.totalAmount)||0,originalAmount:i}}})(null==f?void 0:f.subscriptionPricing),v=(e=>{if(null==e||!e.discount)return null;var{discount:t}=e,n=t.status;return{discountCode:t.discountCode,discountCodeRejectionReason:t.discountCodeRejectionReason,discountType:t.discountType,discountNote:t.discountNote,expiryDate:t.expiryDate,status:n,originalPrice:t.originalPrice,discountedPrice:t.discountedPrice,trialDiscount:t.trialDiscount||!1,discountNumPeriodsMonths:t.discountNumPeriodsMonths,discountNumPeriodsAnnual:t.discountNumPeriodsAnnual,trialOriginalPrice:t.trialOriginalPrice,trialDiscountedPrice:t.trialDiscountedPrice}})(null==f?void 0:f.subscriptionPricing),_=(e=>{var t,n,r,i,u,o;if(null==e||!e.trialPeriod)return null;var{trialPeriod:a}=e,s=null!=(t=e.discount)&&t.trialDiscount?(null==(n=e.discount)?void 0:n.trialOriginalPrice)||0:(null==(r=a.trialCharge)?void 0:r.totalAmount)||0,l=a.trialPeriodUnits;return{numberOfDays:a.numberOfDays,endDate:new Date(a.endDate),trialCharge:{currencyCode:(null==(i=a.trialCharge)?void 0:i.currencyCode)||"USD",dueDate:new Date((null==(u=a.trialCharge)?void 0:u.dueDate)||""),totalAmount:(null==(o=a.trialCharge)?void 0:o.totalAmount)||0,originalAmount:s},trialPeriodUnits:l,trialPeriodDuration:a.trialPeriodDuration||0}})(null==f?void 0:f.subscriptionPricing);return{subscriptionPrice:{isMember:(null==f||null==(s=f.subscriptionPricing)?void 0:s.isMember)||!1,fullSubscription:y,discount:v,trialPeriod:_},fetching:p,error:b}},W=e=>{var{preferences:{currency:t}}=r(s),{promoCodeForm:{appliedPromoCode:n,isApplying:i,promoCodeField:u}}=r(f),o=i&&u.value||(null==n?void 0:n.code);return v(t,o,!t,e)},Z={__key:0x693090c2ef93,id:"693090c2ef93f0d229ceefb4a6efcaf9",loc:{},definitions:[]},Q=()=>{var[,e]=p(Z);return o((()=>e()),[e])},G={__key:0xf0c3b047a083,id:"f0c3b047a083ffd05b48e7b5d19ee64e",loc:{},definitions:[]},K={__key:0x7dbee74118bf,id:"7dbee74118bf1e182d230f175ea16473",loc:{},definitions:[]},X=()=>{var{localize:e}=g(),[{data:t,fetching:n}]=m({query:K}),r=((e,t,n)=>{var r,i=(e=>({BETTER_RATES_ELSEWHERE:e.string("plus_account_cancellation_reason_better_rates_elsewhere"),CANNOT_FIND_REQUIRED_HOTEL:e.string("plus_account_cancellation_reason_cannot_find_required_hotel"),COVID19_PANDEMIC_UNCERTAINTY:e.string("plus_account_cancellation_reason_covid19_pandemic_uncertainty"),CUSTOMER_SERVICE_EXPERIENCE:e.string("plus_account_cancellation_reason_customer_service_experience"),ISSUE_WITH_BOOKING:e.string("plus_account_cancellation_reason_issue_with_booking"),SUBSCRIBED_BY_MISTAKE:e.string("plus_account_cancellation_reason_subscribed_by_mistake"),TRAVEL_PLANS_CHANGED:e.string("plus_account_cancellation_reason_travel_plans_changed")}))(n);return(!t&&(null==e||null==(r=e.OptimusBenefits_getUserCancellationReasonOptions)?void 0:r.reasons)||[]).map((e=>{var t=i[e];return{reason:e,value:e,displayName:t,label:t}}))})(t,n,e),[,i]=p(G);return[r,o((e=>i({reason:e})),[i])]},J={__key:21303208491435,id:"13600a2cb9ab2080d1b6ecb7bed11468",loc:{},definitions:[]},ee=()=>{var[{data:e,fetching:t}]=m({query:J}),n=!t&&(null==e?void 0:e.OptimusBenefits_getUserCancelSubscriptionEligibility)||null;return{upcomingBookings:(null==n?void 0:n.upcomingBookings)||0,status:(null==n?void 0:n.status)||null}},te=()=>{var{funnelKey:e}=r(y);return o((t=>{var n={currency:t.currency,totalAmount:t.totalAmount,subscriptionNumber:t.subscriptionNumber,funnelKey:e},r=new URLSearchParams;Object.entries(n).forEach((([e,t])=>{r.set(e,String(t))}));var i=new AbortController,u=setTimeout((()=>i.abort()),3e3);return fetch("/PlusCommerce",{method:"POST",credentials:"same-origin",body:r.toString(),headers:{"content-type":"application/x-www-form-urlencoded"},signal:i.signal}).finally((()=>clearTimeout(u)))}),[e])},ne={__key:0x61938c1a8cf5,id:"61938c1a8cf5d4390366974e76fa864c",loc:{},definitions:[]},re={__key:25295595403349,id:"170196fa7855ffc7adec26a861b9adaf",loc:{},definitions:[]},ie={__key:87241195239483,id:"4f586c73b83b2b37df07d6730c9f1ce2",loc:{},definitions:[]},ue={__key:0x94647d077caf,id:"94647d077caf68c3df4a6ba8ba540312",loc:{},definitions:[]},oe=()=>{var e=b(),t=_(),[,n]=p(ue),r=o((e=>{var{billingAccountId:t,checkoutSessionId:r,sessionPaymentAccountToken:i,userId:u,paymentId:o}=e;n({request:{billingAccountId:t,checkoutSessionId:r,sessionPaymentAccountToken:i,userId:u,paymentId:o}})}),[n]),i=o(((e,n)=>{var r={currency:e.currency,totalAmount:e.totalAmount,subscriptionNumber:e.subscriptionNumber};t(r).catch((e=>{console.error("Error logging P_Sub commerce click",e)})).finally((()=>{n&&n(e)}))}),[t]);return o((t=>{var n=0,{session:u,onSuccess:o,onError:a}=t,s=(e,t)=>{clearInterval(e),a&&(r(u),a(t))},l="COMPLETE"===t.stage?ie:re,c={request:u},d=setInterval((()=>{n++>=15&&s(d),e.query(l,c,{requestPolicy:"network-only"}).toPromise().then((({data:e,error:n})=>{e||s(d,"MISSING_DATA"),n&&s(d,"QUERY_ERROR");var r="COMPLETE"===t.stage?null==e?void 0:e.OptimusPurchase_getCompletedPurchase:null==e?void 0:e.OptimusPurchase_getStartedPurchase;"SUCCESS"===(null==r?void 0:r.status)&&null!=r&&r.session&&((e,n)=>{clearInterval(e),"COMPLETE"===t.stage?i(n,o):o&&o(n)})(d,r.session),"INTERNAL_ERROR"!==(null==r?void 0:r.status)&&"PAYMENT_FAILURE"!==(null==r?void 0:r.status)||s(d,r.status)}))}),1e3)}),[e,r,i])},ae=()=>{var[,e]=p(ne),t=oe(),n=oe(),{locale:{code:i}}=r(l),{userId:u}=r(a),{preferences:{currency:c}}=r(s),[,d]=p(ue),f=o((({billingAccountId:e,checkoutSessionId:t,sessionPaymentAccountToken:n})=>{u&&n&&d({request:{billingAccountId:e,checkoutSessionId:t,sessionPaymentAccountToken:n,userId:u}})}),[u,d]);return o((({billingAccountId:r,checkoutSessionId:o,source:a,billingAddress:s,firstName:l,lastName:d,emailAddress:m,phoneNumber:p,paymentToken:b,storedCardId:g,discountCode:y,onSuccess:v,onError:_,cardType:D,inAuthTransactionId:h,updateMemberAccountInfo:P,expectedSubscriptionPrice:A,csrfToken:C,paymentNonce:N,paymentMethod:I,payerId:S})=>{var T=null,E="PAYPAL"===I?"PAYPAL":null;E&&N&&(T={paymentMethod:E,paymentNonce:N,payerId:S}),e({request:{userId:u||"",billingAccountId:r,pointOfSale:i,source:a,billingAddress:s?{name:s.cardholderName,address1:s.street,address2:s.street2,postalCode:s.postalCode,state:s.state,city:s.city,countryCode:s.country}:void 0,firstName:l,lastName:d,emailAddress:m,phoneNumber:p,sessionPaymentAccountToken:b,checkoutSessionId:o,currencyCode:c,cardType:D,existingStoredCardId:g||null,discountCode:y,inAuthSessionId:h||"",updateMemberAccountInfo:P,expectedSubscriptionPrice:A,csrfToken:C,tokenizedPaymentInfo:T}}).then((({data:e})=>{if(!e)return f({billingAccountId:r,checkoutSessionId:o,sessionPaymentAccountToken:b}),void _();var{OptimusPurchase_startStandalonePurchase:i=null}=e;"IN_PROGRESS"===(null==i?void 0:i.status)&&null!=i&&i.session?t({stage:"START",session:null==i?void 0:i.session,onSuccess:e=>{n({session:e,stage:"COMPLETE",onSuccess:v,onError:_})},onError:_}):"PAYMENT_FAILURE"===(null==i?void 0:i.status)?_("PAYMENT_FAILURE"):(f({billingAccountId:r,checkoutSessionId:o,sessionPaymentAccountToken:b}),_())})).catch((()=>{f({billingAccountId:r,checkoutSessionId:o,sessionPaymentAccountToken:b}),_()}))}),[e,u,i,c,f,t,n])},se=()=>{var[{params:e}]=r(c),t="number"==typeof e.detailId?e.detailId:void 0;return t?`&detailId=${t}`:""},le={__key:0xff983cd673dd,id:"ff983cd673ddb9f94faab6dffc72f44e",loc:{},definitions:[]},ce=()=>{var[,e]=p(le);return o((()=>e()),[e])},de={__key:0x9867e86aee7f,id:"9867e86aee7f50640847a4079278f0bc",loc:{},definitions:[]},fe=e=>{var t,n,{preferences:{currency:o}}=r(s),{userId:l}=r(a),[c,d]=i(l),[{data:f,fetching:p,error:b},g]=m({query:de,variables:{currency:o},pause:e||!o});return u((()=>{var e=l!==c;l&&e&&g({requestPolicy:"network-only"}),e&&d(l)}),[c,g,l]),{eligible:(null==f||null==(t=f.OptimusBenefits_getOptimusEligibility)?void 0:t.eligible)||!1,subscribed:(null==f||null==(n=f.OptimusBenefits_getOptimusEligibility)?void 0:n.subscribed)||!1,error:b,fetching:p}};return[()=>{e({useCommerceClickLogger:_=te,useDetailQueryParameter:se,useOptimusEligibility:fe,useOptimusSubscription:$,useOptimusSubscriptionCancel:X,useOptimusSubscriptionCancelEligibility:ee,useOptimusSubscriptionDisableAutoRenew:Q,useOptimusSubscriptionEnableAutoRenew:ce,useOptimusSubscriptionPrice:W,useOptimusSubscriptionPriceQuery:v=V,usePurchaseOptimusSubscription:ae})},[e=>(n=e.default,r=e.useContext,i=e.useState,u=e.useEffect,o=e.useCallback),e=>(a=e.Visitor,s=e.TravelInfo,l=e.Environment,c=e.Route),e=>d=e.default,e=>f=e.Payment,e=>(m=e.useQuery,p=e.useMutation,b=e.useClient),e=>g=e.useLocalize,e=>y=e.FunnelTracking]]},["cDcdfi","2R4xv2","kYmwth","ENvJHX","5X2em-","0DsHEV","ETqDaL"]]);
