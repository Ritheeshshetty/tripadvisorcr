(this.$WP=this.$WP||[]).push(["Kv5xL1",(e,t)=>{"use strict";var a,l,r,n,i,o,s,u,c,d,p,h,g,v,f,m,b,y,R,T,_,S,A,N,C,k,I,M,O,x,E,w,L,D,H,P,U,V,F,q,B,j="fcKuM _G _H B- _S t u j Cj",K=({styleVariant:e="box",overlayVariant:t="none",placeholderText:l,query:o="",displayedQuery:s="",scope:y={geoId:0},onChange:R=(()=>{}),onOpen:T,onClose:C,onKeyDown:k,onSubmit:I,onResultHovered:M,onResultClicked:O=(()=>{}),isOpen:x=!1,isLoading:E=!1,selectedIndex:w,results:L=[],header:D,headerIndex:H,searchSessionId:P="",testAttribute:U=""})=>{var{localize:V}=_(),{viewportCategory:F}=r(b),q=n(),B=n(),K=null!=y&&"number"==typeof y.geoId&&y.geoId>1,Q=null!=y&&"number"==typeof y.latitude&&"number"==typeof y.longitude,$=p((e=>{e||null==C||(B.current&&B.current.blur(),C())})),G=i((e=>R(e.currentTarget.value)),[R]),z=i((()=>{R(""),B.current&&B.current.focus()}),[R]),Z="MOBILE"===F&&x,W=i((()=>{Z&&B.current&&B.current.blur()}),[Z]);S(Z),c((()=>{var e=B.current,t=q.current;x&&null!=e&&null!=t&&e.focus()}),[x]),d("focusin",(e=>{x&&$.current instanceof Element&&e.target instanceof Element&&!$.current.contains(e.target)&&(null==C||C())})),d("keydown",(e=>{var t;e instanceof KeyboardEvent&&(x||e.target===B.current)&&(null==k||k(e),null==(t=B.current)||t.focus())}));var X=a.useRef();if(c((()=>{x&&null!=X.current&&X.current.focus()}),[x,w]),"expanding_right"===e&&"MOBILE"===F&&!x)return A("button",{className:`${j} dEiGF`,title:V.string("common_Search"),"aria-label":V.string("common_Search"),onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),null!=T&&T()},children:A(g,{})});var Y=L.map(((e,t)=>A(f,{tabIndex:"-1",role:"option","aria-selected":t===w,heading:e.title,highlightingInfo:e.highlightingInfo,subheading:e.subtitle,label:e.label,icon:e.icon,image:e.image,imageVariant:e.imageVariant,href:e.url,selected:t===w,query:o,onClick:t=>{null==e.onClick||e.onClick(),O(e,t)},onMouseOver:M,ref:t===w?X:void 0},t)));return null!=H&&null!=D&&Y.splice(H,0,A(m,{variant:"label-01",color:"primaryText",marginX:"spacing-04",marginY:"spacing-02",id:"typeahead_results_header",children:D})),N("div",{ref:q,className:u("weiIG Z0 Wh",{eoyKC:x,fRhqZ:"box"===e,bZZEX:"expanding_right"===e,cciLZ:"heroSearchNarrow"===t,eNLxe:"topCentered"===t}),onTouchMove:W,"data-test-attribute":U,children:[A("div",{className:"fknAV",onClick:C}),N("form",{role:"search","aria-busy":E?"true":void 0,className:"bmTdH o",action:"/Search",onInvalid:e=>e.preventDefault(),onSubmit:I,ref:$,children:[A("input",{ref:B,type:"search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,name:"q",className:u("fhEMT _G B- z _J Cj R0",{fQSqO:0!==o.length}),placeholder:l,title:V.string("common_Search"),role:"searchbox","aria-label":V.string("common_Search"),"aria-controls":"typeahead_results","aria-autocomplete":"list",value:s,onChange:G,onClick:()=>{T&&T()}}),A("input",{type:"hidden",name:"searchSessionId",value:P}),A("input",{type:"hidden",name:"searchNearby",value:Q}),Q&&A("input",{type:"hidden",name:"latitude",value:(null==y?void 0:y.latitude)||""}),Q&&A("input",{type:"hidden",name:"longitude",value:(null==y?void 0:y.longitude)||""}),K&&A("input",{type:"hidden",name:"geo",value:null==y?void 0:y.geoId}),A("button",{type:"button",className:`${j} eRhKG`,title:V.string("mobile_back_8e0"),"aria-label":V.string("mobile_back_8e0"),onClick:C,children:A(h,{})}),0!==o.length&&A("button",{type:"button",className:`${j} eSmFw`,title:V.string("mobile_search_filter_clear_26e8"),"aria-label":V.string("mobile_search_filter_clear_26e8"),onClick:z,children:A(v,{})}),A("button",{type:"submit",formAction:"/Search",className:`${j} dobQt`,title:V.string("common_Search"),"aria-label":V.string("common_Search"),tabIndex:-1,children:E?A("svg",{className:"dPfmn",viewBox:"0 0 20 20",children:A("path",{className:"caTQD",d:"M 10 2 A 8 8 0 1 0 18 10"})}):A(g,{})}),x&&A("div",{id:"typeahead_results",role:"listbox","aria-labelledby":"typeahead_results_header",className:"djGIH","data-test-attribute":"typeahead-results",children:Y})]})]})},Q={__key:59392074389379,id:"36044b7f178388df8e2203ed86df5001",loc:{},definitions:[]},$={__key:0x7a84604bf8da,id:"7a84604bf8da07d67643f0d3dc37c518",loc:{},definitions:[]},G=(e,t,a=!1)=>{var l,r,n,i,o,{locationV2:s,defaultUrl:u,hotelsUrl:c,attractionOverviewURL:d,restaurantOverviewURL:p}=null!=e?e:{},{locationId:h,placeType:g,isGeo:v,names:f,vacationRentalsRoute:m}=null!=s?s:{};if(null==h||h<=1)return null;if(null!=t&&!0!==v)return null;var b=null!=(l=null!=(r=null!=(n=null!=c?c:d)?n:p)?r:null==m?void 0:m.url)?l:u;return null==b?null:{key:String(h),title:null!=(i=null==f?void 0:f.name)?i:"",subtitle:null==f?void 0:f.longOnlyHierarchyTypeaheadV2,label:a?A(T,{id:"social_mobile_reason_for_sponsored"}):void 0,searchText:null!=(o=null==f?void 0:f.name)?o:"",url:b,trackingType:a?"SPONSORED_LOCATION":"LOCATION",trackingPlaceType:g,locationId:null!=h?h:-1}},z={__key:0xc8f09d1da793,id:"c8f09d1da7931b59aa2dcb94924c1eee",loc:{},definitions:[]},Z=({scope:e,onStopLoading:t})=>{var{localize:l}=_(),r="number"==typeof e.latitude&&"number"==typeof e.longitude,n=((e,t)=>{var{localize:l}=_(),r=k(),n=x(),o=a.useRef(!0);return a.useEffect((()=>()=>{o.current=!1}),[]),i((()=>{navigator.geolocation.getCurrentPosition((({coords:{latitude:a,longitude:l}})=>{w.set("rejectedLocationPermissions",!1);var i=(()=>{switch(e){case"ATTRACTIONS":return{page:"NearbyAttractions",params:{latitude:a,longitude:l}};case"HOTELS":return{page:"NearbyHotels",params:{latitude:a,longitude:l}};case"RESTAURANTS":return{page:"NearbyRestaurants",params:{latitude:a,longitude:l}};default:return{page:"Nearby",params:{isNearby:!0,latitude:a,longitude:l}}}})();n.query(z,i).toPromise().then((({data:e})=>{if(o.current){var a,l;t();var n=null==e||null==(a=e.routes)||null==(l=a[0])?void 0:l.url;null!=n&&r(n)}}),(()=>{t()}))}),(e=>{o.current&&t(),e.code!==e.PERMISSION_DENIED&&e.code!==e.TIMEOUT&&e.code!==e.POSITION_UNAVAILABLE||(w.set("rejectedLocationPermissions",!0),alert(l.string("mw_js_positionPermissionDenied")))}),{timeout:6e3})}),[l,r,n,e,t])})(e.linkType,t);return r?null:{title:l.string("mx_nearby"),searchText:l.string("mx_nearby"),icon:L,trackingType:"NEARBY",key:"NEARBY",onClick:n}},W={__key:0xba36aedca592,id:"ba36aedca592c2343f965a37084104c8",loc:{},definitions:[]},X=({isOpen:e,scope:t,sponsorDataProvider:l,getSponsorData:r})=>{var n,{domainName:i}=a.useContext(y),[o,s]=a.useState(!1),[u,c]=a.useState(r?r():null),d=a.useRef(),[p,h]=a.useState(!1);a.useEffect((()=>{l&&null==u&&(d.current||(d.current=setTimeout((()=>{l((e=>{c(e)})),h(!0)}),6e3)))}),[l,u]),a.useEffect((()=>()=>clearTimeout(d.current)),[]),a.useEffect((()=>{l&&null==u&&e&&(p||clearTimeout(d.current),l((e=>{c(e)})))}),[l,u,e,p]);var[{fetching:g,error:v,data:f}]=E({query:W,variables:{locationId:u&&u.location_id||0,isHotelsUrl:!1,isAttractionsUrl:!1,isRestaurantsUrl:!1,isRentalsUrl:!1},pause:!u||!u.location_id||!e});if(g||v)return null;var m=U(null==f||null==(n=f.locations)?void 0:n[0],t.linkType,!0);if(null==m)return null;var{dfpTrackingUrl:b,thirdPartyClickTrackerURL:R}=u||{};return{...m,title:o&&null!=R?N(C,{children:[m.title,A(D,{children:A(H,{title:"",src:R})})]}):m.title,url:null!=m.url&&null!=b?`${b}${new URL(m.url,`https://${i}`).href}`:void 0,onClick:()=>s(!0)}},Y=({isOpen:e,scope:t,sponsorDataProvider:l,getSponsorData:r,onStopLoading:n})=>{var[,{uid:i}]=a.useContext(R),o={isHotelsUrl:"HOTELS"===t.linkType,isAttractionsUrl:"ATTRACTIONS"===t.linkType,isRestaurantsUrl:"RESTAURANTS"===t.linkType,isRentalsUrl:"VACATION_RENTALS"===t.linkType},[{data:s}]=E({query:Q,variables:o,pause:!e}),[{data:u}]=E({query:$,variables:{recentLocationsLimit:["ATTRACTION","HOTEL","RESTAURANT"].includes(t.pageType)?10:5,uid:i,...o},pause:!e}),c=V({scope:t,onStopLoading:n}),d=F({scope:t,isOpen:e,sponsorDataProvider:l,getSponsorData:r}),p=a.useMemo((()=>((null==s?void 0:s.popularDestinations.map((e=>U(e,t.linkType))))||[]).filter(Boolean).slice(0,5)),[s,t.linkType]),h=a.useMemo((()=>{var e,a;return((null==u||null==(e=u.insightProfile)||null==(a=e.locations)?void 0:a.map((e=>U(null==e?void 0:e.location,t.linkType))))||[]).filter(Boolean).slice(0,5)}),[u,t.linkType]);return a.useMemo((()=>{var e,t,a=[];return null!=c&&a.push(c),null!=d&&a.push(d),h.length>0?(e=A(T,{id:"dual_search_recently_viewed_all_caps"}),t=a.length,a.push(...h)):p.length>0&&(e=A(T,{id:"dual_search_popular_destinations"}),t=a.length,a.push(...p)),{results:a,header:e,headerIndex:t}}),[c,d,p,h])},J=({source:e,scope:t,maxItems:a,onClose:l,isOpen:u,onOpen:c,query:d,setQuery:p,searchMode:h="SingleSearch",highlightFirstResult:g=!1,sponsorDataProvider:v,getSponsorData:f})=>{var m,[b]=r(R),y=k(),[T,_]=o(0),[S,A]=o(!1),{results:{results:N,resultsId:C},logTypeaheadOpened:x,logResultSelection:E,logSearchAction:w,searchSessionId:L}=M(d,e,t,h,a),D=i((()=>{A(!1)}),[]),H=q({scope:t,isOpen:u,sponsorDataProvider:v,getSponsorData:f,onStopLoading:D}),P=0===N.length||!d.length||d.length<O,U=P?H.results:N,V=n("");s((()=>{C!==V.current&&(_(Date.now()),V.current=C)}),[C]);var[F,B]=o(null),j=g&&null==F?0:F,K=null!=F&&(null==(m=U[F])?void 0:m.searchText)||d,Q=i(((e,t)=>{E(t,P,e,U.findIndex((t=>t.key===e.key)),T)}),[U,E,T,P]),$=i((e=>{if(null!=e){if(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(I(b)&&b.path===e.currentTarget.pathname)return void(null!=l&&l())}A(!0)}),[b,l]),G=i((e=>{u&&!e||(c&&c(),B(null),x(),_(Date.now()))}),[c,u,x]),z=i((()=>{u&&(B(null),l&&l())}),[u,l]),Z=i((e=>{p(e),B(null),e.length>=O&&G()}),[p,G]),W=i((e=>{switch(e.keyCode){case 38:u?B((e=>null==e?U.length-1:e>0?e-1:null)):G(),e.preventDefault();break;case 40:u?B((e=>null==e?0:e<U.length-1?e+1:null)):G(),e.preventDefault();break;case 13:var t,a;null!=j&&null!=U[j]&&(Q(U[j],"enter"),!1===e.defaultPrevented&&(null==(t=(a=U[j]).onClick)||t.call(a),null!=U[j].url&&y(U[j].url)&&A(!0),e.preventDefault()));break;case 27:z(),e.preventDefault()}}),[y,u,j,U,z,G,Q]),X=i((()=>{w(T),A(!0)}),[w,T]),Y=i((()=>{B(null)}),[]),J=i(((e,t)=>{Q(e,"click"),$(t)}),[Q,$]);return{displayedQuery:K,isLoading:S,results:U,header:P?H.header:void 0,headerIndex:P?H.headerIndex:void 0,selectedIndex:j,searchSessionId:L,onResultHovered:Y,onResultClicked:J,onOpen:G,onClose:z,onSubmit:X,onChange:Z,onKeyDown:W}},ee={HOTEL:["Hotels","MobileHotels","Hotel_Review","MobileHotel_Review","HotelHighlight","MobileHotelHighlight","SmartDeals","MobileSmartDeals","HotelsList","MobileHotelsList","HotelsNear","MobileHotelsNear","NearbyHotels","MobileNearbyHotels","HotelSearch","LastMinute","TravelersChoiceHotels","ShowUserReviewsHotels"],ATTRACTION:["Attractions","MobileAttractions","Attractions_Coverpage","Attraction_Review","MobileAttraction_Review","AttractionsNear","AttractionProductReview","MobileAttractionProductReview","MobileAttractionsNear","Attraction_Products","MobileAttraction_Products","AttractionReviewSearch","MobileAttractionReviewSearch","NearbyAttractions","MobileNearbyAttractions","ShowUserReviewsAttractions","TravelersChoiceAttractions"],RESTAURANT:["Restaurants","MobileRestaurants","Restaurant_Review","MobileRestaurant_Review","RestaurantSearch","MobileRestaurantSearch","RestaurantsNear","MobileRestaurantsNear","RestaurantMenu","MobileRestaurantMenu","NearbyRestaurants","MobileNearbyRestaurants","TravelersChoiceRestaurants","ShowUserReviewsRestaurants"],FORUM:["ShowTopic","ShowForum","ListForums","ForumHome"]},te={},ae=({source:e,maxItems:t=10,styleVariant:a,overlayVariant:l,placeholderText:r,hidden:n,onClose:u,scope:c,sponsorDataProvider:d,getSponsorData:p,searchMode:h="SingleSearch",isModalOnly:g=!1,highlightFirstResult:v=!1})=>{var[f,m]=o(g),b=i((()=>{g||m(!1),u&&u()}),[u,g]),y=i((()=>{g||m(!0)}),[g]),[R,T]=o(""),_=B({source:e,maxItems:t,scope:c,searchMode:h,onOpen:y,onClose:b,isOpen:f,query:R,setQuery:T,highlightFirstResult:v,sponsorDataProvider:d,getSponsorData:p}),{onOpen:S}=_;return s((()=>{g&&null!=S&&S(!0)}),[g,S]),n&&!f?null:A(P,{..._,styleVariant:a,overlayVariant:l,placeholderText:r,query:R,scope:c,isOpen:f,testAttribute:`typeahead-${e}`})};return[()=>{P=l(K),U=G,V=Z,F=X,q=Y,B=J,Object.entries(ee).forEach((([e,t])=>Array.isArray(t)&&t.forEach((t=>{"string"==typeof t&&(te[t]=e)})))),e({default:l(ae),pageToTypeMappings:te})},[e=>(a=e.default,l=e.memo,r=e.useContext,n=e.useRef,i=e.useCallback,o=e.useState,s=e.useEffect),e=>u=e.default,e=>c=e.useClientSideLayoutEffect,e=>d=e.useWindow,e=>p=e.useVisibleEffect,e=>h=e.default,e=>g=e.default,e=>v=e.default,e=>f=e.default,e=>m=e.default,e=>(b=e.Device,y=e.Environment,R=e.Route),e=>(T=e.default,_=e.useLocalize),e=>S=e.useBlockScroll,e=>(A=e.jsx,N=e.jsxs,C=e.Fragment),e=>k=e.useNavigate,e=>I=e.isRoutable,e=>(M=e.default,O=e.MIN_QUERY_LENGTH),e=>(x=e.useClient,E=e.useQuery),e=>w=e.default,e=>L=e.default,e=>D=e.ConsentGate,e=>H=e.Pixel]]},["cDcdfi","jSLlaY","4Z07E2","Dg5_-9","BLrxBS","j6P7_e","zeV7p9","2x7WI3","L2wXtu","VP50Wc","2R4xv2","0DsHEV","xegF5W","F5FCuN","1yEXVQ","jmIMrC","ABlMo4","5X2em-","qKFflQ","3LpzHo","lMO0v3","m5ZZFI"]]);
