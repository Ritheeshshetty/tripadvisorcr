(this.$WP=this.$WP||[]).push(["mGqah_",(e,a)=>{"use strict";var i,t,n,o,r,s,l,u,d,c,v,m,h,g,p,f,b,x,C,k,N,_,y,E,S,w,A,R,T,V,L,I,O,B,F,P,U,j,H=e=>{var{isOptimusEnabled:a,isOptimusSubscribed:i}=b(),{locale:t}=n(m),{fetching:o,cashbackEnabled:r}=x(!a||i||!e.includes("Nova")||"en-US"!==t.code);return i||!a?{fetching:o,targeting:"false"}:{fetching:o,targeting:r?"Cashback":"Discount"}},K={Home:["InlineNova"]},z=e=>{var a,[{page:i}]=n(h);return"false"!==H(e).targeting&&null!=(a=K[i])&&a.includes(e)?"Optimus":null},D="eYhTi",W={maxHeight:1388,maxWidth:1728,urlTemplate:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1d/1c/9a/45/caption.jpg?w={width}&h={height}&s=1"},X="NOVA_FALLBACK",G=()=>{var{localize:e}=N(),[,{uid:a}]=n(h),i=E(),t=S(),[s]=o(_()),l=y((()=>{i({optimusAd:{pageviewUid:a,funnelKey:s,position:X}})})),u=r((()=>{t({OptimusAdInteraction:{optimusAdClick:{pageviewUid:a,funnelKey:s,position:X}}})}),[t,a,s]),d=`/Plus?ik=${s}`;return A("div",{ref:l,children:A(C,{title:e.string("plus_home_takeover_nova_header"),subtitle:e.string("plus_home_takeover_nova_subheader"),ctaText:e.string("plus_home_takeover_learn_more"),href:d,backgroundColor:"plusBackground",image:W,contentHeader:A(k,{variant:"plus-logo-text-white",height:20}),onClick:u})})},M=({takeoverVariant:e})=>{switch(e){case"Optimus":return A(I,{});default:return console.error(`Missing nova ad takeover fallback for variant: ${e}`),null}},Y=["Home"],$=(e,a,i)=>e?A(O,{takeoverVariant:e}):a?A(p,{}):i||null,Q=({position:e,takeoverVariant:a,children:t,aboveTheFold:n=!1})=>{var[o]=i.useContext(h),{viewportCategory:r}=i.useContext(g),s=Y.includes(o.page)?"3x3":{MOBILE:"300x250|8x8|3x3",TABLET:"728x90|3x3",DESKTOP:"728x90|3x3"}[r],{ref:u,id:d,isEmpty:v,isLayoutShiftEnabled:m,shouldRenderFallback:p}=c(s,e,"",n),b=!!a,x=p&&"Optimus"===a;return R("div",{className:l({bUIoG:m,tbCLx:!m&&b&&!x,fcsao:!m&&b&&x,[D]:!m&&!b}),children:[m&&p&&f(e),!m&&p&&$(a,"Tourism"===o.page,t),A("div",{id:d,ref:u,className:l({"caEpn f j u":!m,"bvltb f j u":m,"VzQYj P0 o":!m&&v})})]})},J=e=>A("div",{className:l("fwsdX",D),children:A(v,{position:"RailNova",size:"300x250|300x600|3x3",isSticky:e.isSticky})}),Z=e=>{var{position:a}=e;return R("div",{"data-automation":`nova-ad-${a}`,children:["InlineNova"===a&&A(Q,{...e}),"RailNova"===a&&A(J,{...e})]})},q=e=>{var a=L(e.position),i=H(e.position),t=e.additionalTargeting?{...e.additionalTargeting,PlusEligible:i.targeting}:{PlusEligible:i.targeting},n={...e,takeoverVariant:a};return A(d,{value:t,children:A(Z,{...n})})},ee=({position:e,...a})=>A(u,{position:e,children:A(q,{position:e,...a})}),ae=({theme:e,onClose:a})=>{var{localize:i}=N();return A("button",{className:l("fTtaR B- _S G-",{Ucbtl:"sand"===e,bRncf:"mint"===e,eSLKV:"juniper"===e}),onClick:a,"aria-label":i.string("common_Close"),type:"button",children:A(V,{})})},ie=({maxViews:e,storageKey:a,theme:i="mint",onClose:n,onVisible:o,children:r})=>{var{isWebview:s}=t.useContext(g),[l,u]=t.useState(!1),d=y((()=>{o&&o()})),c=t.useCallback((()=>{u(!1),T.set(a,e),n&&n()}),[e,n,a]);return t.useEffect((()=>{var i=T.has(a)?parseInt(T.get(a),10):0;i<e&&(u(!0),T.set(a,i+1))}),[e,a]),!l||s?null:R(P,{theme:i,ref:d,children:[A("div",{className:"cXKty _U t",children:A(U,{theme:i,onClose:c})}),A("div",{className:"eXeXp w",children:r})]})},te="SUNova",ne=()=>{var[{page:e}]=t.useContext(h),a=w(),i=i=>{a({module:"Nova_Forum",context:e,action:i})},{ref:n,id:o,isEmpty:r,isLoaded:s}=c("3x3",te,"",!0);return A("div",{className:l({czTjY:!s||r}),children:A(j,{storageKey:"novaForumViewCount",maxViews:2,theme:"nova",onVisible:()=>{i("Nova_Forum_seen")},onClose:()=>{i("Nova_Forum_closed")},children:A("div",{ref:n,id:o,className:l("OtaVz")})})})},oe=()=>{var e=H(te),a={fluidType:"nova",PlusEligible:e.targeting};return!e.fetching&&A(u,{position:te,children:A(d,{value:a,children:A(ne,{})})})},re=["MOBILE"],se=["Tourism","Hotel_Review","Restaurants","Restaurants_Review","ShowForum","ShowTopic"],le=["en-US","fr-FR","en-AU","en-GB","en-CA","fr-CA","es-MX","it-IT","es-ES","ja-JP","ko-KR","zh-Hant-TW","en-IN","de-DE","nl-NL","pt-BR"],ue=()=>{var[e]=n(h),{viewportCategory:a,userAgentCategory:i}=n(g),{locale:t}=n(m);return"en-US"===t.code||!!(re.includes(i)&&re.includes(a)&&le.includes(t.code)&&se.includes(e.page))};return[()=>{L=z,I=G,O=M,B=s(ee),(F=t.forwardRef((({theme:e,children:a},i)=>A("div",{ref:i,className:l("cfybu f o D s Za",{csMOQ:"mint"===e,eVoiX:"sand"===e,eNyeZ:"juniper"===e,dBVVs:"nova"===e}),role:"dialog",children:a})))).displayName="PromoContentContainer",P=F,U=ae,j=ie,e({NovaStickyAd:oe,default:B,useNovaAd:ue})},[e=>(i=e,t=e.default,n=e.useContext,o=e.useState,r=e.useCallback,s=e.memo),e=>l=e.default,e=>(u=e.AdErrorBoundary,d=e.AdTargetingProvider,c=e.useAd,v=e.RailAd),e=>(m=e.Environment,h=e.Route,g=e.Device),e=>p=e.default,e=>f=e.LayoutShiftFallbackSelector,e=>b=e.useOptimusEnabledForUser,e=>x=e.useCashbackEnabled,e=>C=e.InsetImageFeatureCard,e=>k=e.default,e=>N=e.useLocalize,e=>_=e.uuid,e=>y=e.useOnVisible,e=>E=e.useImpressionLogger,e=>(S=e.useInteractionLogger,w=e.useGARecorder),e=>(A=e.jsx,R=e.jsxs),e=>T=e.default,e=>V=e.default]]},["cDcdfi","jSLlaY","dHlxRh","2R4xv2","2IPQDU","JRA1sg","v_y45t","tVuenP","U1tcLB","TkeYrn","0DsHEV","O-HcBE","BLrxBS","30t50h","fsml46","F5FCuN","jaCyxS","2x7WI3"]]);
