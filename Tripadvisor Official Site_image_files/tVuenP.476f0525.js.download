(this.$WP=this.$WP||[]).push(["tVuenP",(e,n)=>{"use strict";var t,r,u,s,a,i,l,o,c,d,p,_,b,v;function m(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function E(e){m(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(new Error).stack,new Date(NaN))}var h="cash_back_on_plus_1629228966",g="cash_back_on_plus_native_1632146213",f="plus_bundling_1636650090",k="plus-required_checkout_variant_test_1637250404",w=e=>{var n=i({experimentKeys:[h,g,f,k],skipImpression:!0},e),t=[h,g];return"test"!==(null==n?void 0:n[h])&&"internal_override_show_funds"!==(null==n?void 0:n[h])||(t.push(f),t.push(k)),i({experimentKeys:t},e),r((()=>({cashbackEnabled:null===n?null:"test"===(null==n?void 0:n[h])||"test"===(null==n?void 0:n[g]),plusBundling:null===n?null:"test"===(null==n?void 0:n.plus_bundling_1636650090),plusRequiredVariant:null===n?null:"test"===(null==n?void 0:n[k])})),[n])},x=()=>r((()=>({cashbackEnabled:!1})),[]),y=(e,n)=>{var[{data:t,fetching:u}]=y.useOptimusSubscription(n),{cashbackEnabled:s,plusBundling:a,plusRequiredVariant:l}=w(n),o=i({experimentKeys:[h]},n),{cashbackEnabled:c}=x(),d="internal_override_show_funds"===(null==o?void 0:o[h]),p=t&&t.startDate&&new Date(t.startDate),_=p&&function(e,n){m(2,arguments);var t=E(e),r=E(n);return t.getTime()<r.getTime()}(p,e),b=!!s&&!_||d||c;return r((()=>({fetching:u||"undefined"==typeof window||null===s||null===a||null===l,cashbackEnabled:!!b,plusBundling:!!a,plusRequiredVariant:!!l&&!!b})),[u,s,a,l,b])},P=e=>y(_,e),R=e=>y(b,e),D=e=>{var{eligible:n,subscribed:t}=o(e);return n&&!t},K=["Attraction_Products","AttractionProductsFusion","AttractionProductReview"],N="vf_free_trial_on_exp_1633643226",C=e=>{var n,t=(null==(n=i({experimentKeys:[N]},e))?void 0:n[N])||null,{cashbackEnabled:r}=P(e),u=v(e);return"test 1"===t&&r&&u},S=()=>{var[{page:e}]=u(c),n=!K.includes(e);return C(n)},T="global_nav_to_unbounce___1638464717",B=()=>{var e=i({experimentKeys:[T]});return"test"===(null==e?void 0:e[T])},O=(e,n)=>{var r=B(),{cashbackEnabled:u}=P();return t.useMemo((()=>{var t=new URLSearchParams;return t.append("utm_source",e),t.append("utm_medium",n),r?u?`https://join.plus.tripadvisor.com/startearning/?${t.toString()}`:`https://join.plus.tripadvisor.com/startsaving/?${t.toString()}`:"/Plus"}),[u,r,e,n])},I="bundled_plus_on_exp_1636164643",F=["Attraction_Products","AttractionsFusion","AttractionProductsFusion","AttractionProductReview"],A=e=>{var n=i({experimentKeys:[I]},e),{cashbackEnabled:t}=P(e),r=v(e);return!(null===n||!t||!r)&&"test"===n[I]},M=()=>{var[{page:e}]=u(c),n=!F.includes(e);return A(n)},U="cashback_checkout_variant_test_1634678889",j=()=>{var[e,n]=s(!0),t=i({experimentKeys:[U]});a((()=>{null!==t&&n(!1)}),[t]);var r=null==t?void 0:t[U];return r?{variant:r.toLowerCase(),fetching:e}:{variant:null,fetching:e}},V=(e,n,t)=>{var r=[];e&&r.push(e);var{userId:s}=u(d),a=i({experimentKeys:r,userId:s||void 0,skipImpression:n},t);return null!==a&&e?a[e]:null},L=({experimentKey:e,excludeBucketNames:n,experimentBucketNames:t,isForOptimusMembers:r,skipServiceCalls:u})=>{var s=V(e,u),a=p(),i=null==r||r||r&&a||!r&&!a;return null!==s&&!!n&&!!t&&!n.includes(s)&&t.includes(s)&&i},q=e=>L({experimentKey:"cyber_week_1636032656",experimentBucketNames:["countdown","no-countdown"],isForOptimusMembers:!1,skipServiceCalls:e})&&!1,W="plus_room_grid_redesign_1642634873",G=()=>{var[e,n]=s(!0),t=i({experimentKeys:[W]});return a((()=>{null!==t&&n(!1)}),[t]),{plusRoomGridRedesign:"test"===(null==t?void 0:t[W])&&!1,fetching:e}};return[()=>{_=new Date("2021-10-19"),b=new Date("2022-07-01"),y.useOptimusSubscription=l,v=D,e({EXPERIMENT_KEY:h,NATIVE_EXPERIMENT_KEY:g,PLUS_BUNDLING_EXPERIMENT_KEY:f,PLUS_REQUIRED_CHECKOUT_EXPERIMENT_KEY:k,useBundledPlusOnExperiencesEnabled:A,useBundledPlusOnExperiencesEnabledForPage:M,useCashbackEnabled:P,useCashbackEnabled100Percent:R,useCashbackEnabledForDate:y,useCashbackEnabledRaw:w,useCashbackEnvConfig:x,useCheckoutVariant:j,useCyberWeekEnabled:q,useExperimentBucket:V,useFreeTrialBannersEnabled:C,useFreeTrialBannersEnabledForPage:S,useOptimusExperimentEnabled:L,useOptimusGlobalNavTrafficDiversion:B,useOptimusNavToUnbounce:O,useRoomGridRedesignEnabled:G})},[e=>(t=e.default,r=e.useMemo,u=e.useContext,s=e.useState,a=e.useEffect),e=>i=e.default,e=>(l=e.useOptimusSubscription,o=e.useOptimusEligibility),e=>(c=e.Route,d=e.Visitor),e=>p=e.default]]},["cDcdfi","S-RL4Q","BWm3Dg","2R4xv2","-WwUo-"]]);
