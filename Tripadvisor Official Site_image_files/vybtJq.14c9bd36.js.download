(this.$WP=this.$WP||[]).push(["vybtJq",(p,e)=>{"use strict";var r,i,s,u,o,t,n,T,a="REGISTER_POPUP",l="DISMISS_POPUP",d=(p,e)=>{switch(e){case 0:return d(p,100);case 100:return p.popupMaxTier>100||p.popupSkipTiers&&p.popupSkipTiers.get(100)?d(p,200):100;case 200:return p.popupSkipTiers&&p.popupSkipTiers.get(200)?d(p,300):200;case 300:return p.popupSkipTiers&&p.popupSkipTiers.get(300)?d(p,400):300;case 400:return p.popupSkipTiers&&p.popupSkipTiers.get(400)?d(p,500):400;case 500:return 500;default:return 0}},c=(p,e,r,i)=>{var s=p.popupNodes,u=p.popupTier,o=p.popupTierEvents,t=p.popupSkipTiers,n=p.popupTierDismissals,T=e.tier;i&&(t=p.popupSkipTiers.set(T,!0)),p.popupNodes.some((p=>p.key===e.key))||(s=[...p.popupNodes,e],u=d({...p,popupSkipTiers:t},0),o=[]);var a=n.get(T),l=r.filter((p=>!(null!=a&&a.includes(p))));return l.length>0&&(a&&a.length>0&&l.length>0?n.set(T,[...a,...l]):n.set(T,r)),{...p,popupNodes:s,popupTierDismissals:n,popupTierEvents:o,popupTier:u,popupSkipTiers:t}},v=(p,e)=>{var r=p.popupTierEvents;if(e.forEach((e=>{var i;!r.includes(e)&&null!=(i=p.popupNodes)&&i.some((r=>r.key===e&&r.tier===p.popupTier))&&(r=[...r,e])})),r.toString()!==p.popupTierEvents.toString()){var i,s,u={popupTierEvents:p.popupTierEvents,popupTier:p.popupTier};(null!=(i=p.popupSkipTiers)&&i.get(p.popupTier||0)||p.popupTierDismissals&&p.popupNodes.length>0&&void 0!==p.popupTier&&(r&&(null==(s=r)?void 0:s.length)>0||0===p.popupTier))&&(u=(p=>{var e,r=e=>({...p,popupTier:e,popupTierEvents:[]});if(Array.from(p.popupTierEvents||[]).sort().toString()===Array.from((null==(e=p.popupTierDismissals)?void 0:e.get(p.popupTier||0))||[]).sort().toString())switch(p.popupTier){case 0:return r(d(p,100));case 100:return r(d(p,200));case 200:return r(d(p,300));case 300:return r(d(p,400));case 400:return r(d(p,500));default:return p}return p})({...p,popupTierEvents:r}));var o=p.popupMaxTier;return p.popupMaxTier<u.popupTier&&(o=u.popupTier),{...p,popupTierEvents:u.popupTierEvents,popupMaxTier:o,popupTier:u.popupTier}}return p},m=(p=(()=>({popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}))(),e)=>{switch(e.type){case a:return void 0!==e.element?c(p,e.element,e.dismissEvents,e.skip):(console.error("Missing element for action in the popup reducer."),p);case l:return v(p,e.dismissEvents);default:return p}},E=({children:p})=>p,S=({children:p})=>{var[e,d]=i(m,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),c=s(((p,e,r)=>{d({type:a,element:p,dismissEvents:e,skip:r})}),[d]),v=s((p=>{d({type:l,dismissEvents:p})}),[d]),E=r.useMemo((()=>({registerPopupTier:c,dismissEvents:v})),[c,v]);return o(n.Provider,{value:E,children:[t(T,{children:p}),e.popupNodes.filter((p=>p.tier===e.popupTier)).map((({node:p,key:e})=>t(T,{children:t(u,{children:p})},e)))]})},k=p=>{var{registerPopupTier:e,dismissEvents:i}=r.useContext(n),{factory:s,key:u,eventTypes:o,tier:t,skip:T}=p,a=r.useRef(null),l=r.useCallback((()=>{i(o)}),[i,o]),d=r.useMemo((()=>({dismiss:l})),[l]);return r.useEffect((()=>{a.current=s(d),e({node:a.current,key:u,tier:t},o,T)}),[o,s,u,e,d,t,T]),{dismiss:l}};return[()=>{n=r.createContext({registerPopupTier:()=>{},dismissEvents:()=>{}}),T=r.memo(E),p({DISMISS_POPUP:l,PopupHierarchyLithiumProvider:S,REGISTER_POPUP:a,dismiss:v,register:c,usePopupHierarchyRender:k})},[p=>(r=p,i=p.useReducer,s=p.useCallback),p=>u=p.ErrorBoundary,p=>(o=p.jsxs,t=p.jsx)]]},["cDcdfi","nIW_Rw","F5FCuN"]]);
